{"mappings":"AAAO,MAGMA,EAAW,CAHK,gBACE,mBAIlBC,EAAyB,CACrCC,cAAiB,sCACeC,gBAAb,sCAGPC,EAAsB,CAClCF,cAAiB,oCACDC,gBAAG,uCAGPE,EAAQ,CACpB,CAAEC,MAAO,WAAmBC,MAAO,MAC5B,CAALD,MAAO,YAAqBC,MAAO,OAC7B,CAAND,MAAO,YAAaC,MAAO,QCdvB,MAAMC,EAAQ,CACpBN,cCLM,MACNO,GAAOC,GACN,OAAOC,KAAKF,MAAMC,GAEnBE,GAAWC,GACV,OAAOF,KAAKC,UAAUC,GAGvBC,YAAYP,GACXQ,KAAKR,MAAQA,EAGdS,iBACC,MAAMC,EAAQF,MAAKN,EAAOS,aAAaC,QAAQJ,KAAKR,SAAW,GAE/D,OAAOa,QAAQC,QAAQJ,GAGxBD,iBAAiBM,GAChB,MAAML,QAAcF,KAAKQ,SAASR,KAAKR,OACjCiB,EAAU,IAAKF,EAAMG,GAAIC,KAAKC,MAAMC,SAAS,KAInD,OAFAV,aAAaW,QAAQd,KAAKR,MAAOQ,MAAKH,EAAW,CAACY,KAAYP,KAEvDG,QAAQC,QAAQG,GAGxBR,iBAAiBM,GAChB,MACMQ,SADcf,KAAKQ,SAASR,KAAKR,QACZwB,KAAKC,GAAUA,EAAKP,KAAOH,EAAKG,GAAKH,EAAOU,IAIvE,OAFAd,aAAaW,QAAQd,KAAKR,MAAOQ,MAAKH,EAAWkB,IAE1CV,QAAQC,QAAQC,GAGxBN,iBAAiBiB,GAChB,MACMC,SADcnB,KAAKQ,SAASR,KAAKR,QAChB4B,QAAO,EAtChCV,GAsCmCA,KAASA,IAAOQ,IAIjD,OAFAf,aAAaW,QAAQd,KAAKR,MAAOQ,MAAKH,EAAWsB,IAE1Cd,QAAQC,QAAQY,KDpCxB9B,gBENM,MACNM,GAAOC,GACN,OAAOC,KAAKF,MAAMC,GAEnBE,GAAWC,GACV,OAAOF,KAAKC,UAAUC,GAGvBC,YAAYP,GACXQ,KAAKR,MAAQA,EAGdS,iBACC,MAAMC,EAAQF,MAAKN,EAAO2B,eAAejB,QAAQJ,KAAKR,SAAW,GAEjE,OAAOa,QAAQC,QAAQJ,GAGxBD,iBAAiBM,GAChB,MAAML,QAAcF,KAAKQ,SAASR,KAAKR,OACjCiB,EAAU,IAAKF,EAAMG,GAAIC,KAAKC,MAAMC,SAAS,KAInD,OAFAQ,eAAeP,QAAQd,KAAKR,MAAOQ,MAAKH,EAAW,CAACY,KAAYP,KAEzDG,QAAQC,QAAQG,GAGxBR,iBAAiBM,GAChB,MACMQ,SADcf,KAAKQ,SAASR,KAAKR,QACZwB,KAAKC,GAAUA,EAAKP,KAAOH,EAAKG,GAAKH,EAAOU,IAIvE,OAFAI,eAAeP,QAAQd,KAAKR,MAAOQ,MAAKH,EAAWkB,IAE5CV,QAAQC,QAAQC,GAGxBN,iBAAiBiB,GAChB,MACMC,SADcnB,KAAKQ,SAASR,KAAKR,QAChB4B,QAAO,EAtChCV,GAsCmCA,KAASA,IAAOQ,IAIjD,OAFAG,eAAeP,QAAQd,KAAKR,MAAOQ,MAAKH,EAAWsB,IAE5Cd,QAAQC,QAAQY,MC1ClB,MAAMI,EACZvB,YAAYwB,EAAKC,EAAU,IAC1BxB,KAAKyB,QAAUC,SAASC,cAAcJ,GACtCvB,KAAKyB,QAAQG,UAAUC,OAAOL,ICDzB,MAAMM,UAAeR,EAC3BvB,YAAYR,EAAOiC,GAClBO,MAAM,SAAUP,GAEhBxB,KAAKyB,QAAQO,YAAczC,GCJtB,MAAM0C,UAAcX,EAC1BvB,YAAYR,EAAOiC,GAClBO,MAAM,KAAMP,GACZxB,KAAKyB,QAAQO,YAAczC,GCHtB,MAAM2C,UAAoBZ,EAChCvB,cACCgC,MAAM,OAAQ,CAAC,cAAe,OAAQ,UAEtC/B,KAAKmC,MAAQ,IAAIb,EAAa,QAAS,CAAC,iBACxCtB,KAAKoC,cAAgB,IAAId,EAAa,MAAO,CAAC,uBAC9CtB,KAAKqC,OAAS,IAAIP,EAAO,gBAAA,CAA8B,MAAO,gBAElD9B,KAAPmC,MAAMV,QAAQa,YAAc,+BACjCtC,KAAKmC,MAAMV,QAAQc,aAAa,YAAa,IAC7CvC,KAAKqC,OAAOZ,QAAQe,UAAW,EAE/BxC,KAAKoC,cAAcX,QAAQgB,OAAOzC,KAAKqC,OAAOZ,SAC9CzB,KAAKyB,QAAQgB,OAAOzC,KAAKmC,MAAMV,QAASzB,KAAKoC,cAAcX,UCbtD,MAAMiB,UAAmBpB,EAC/BvB,YAAY4C,EAASC,GACpBb,MAAM,MAAO,CAAC,MAAO,OAAQ,2BAE7B/B,KAAK6C,aAAeF,EAAQ3B,KAAI,EANlCzB,MAMqCA,EANrCC,MAM4CA,GAASsD,KAClD,MAPHrB,QAOWA,GAAY,IAAIH,EAAa,IAAK,CAAC,WAAY,QAQvD,OANAG,EAAQsB,QAAQrC,GAAKlB,EACrBiC,EAAQO,YAAczC,EACtBkC,EAAQuB,KAAiB,IAAVF,EAAc,IAAMtD,EAE/BoD,IAAoBpD,GAAOiC,EAAQG,UAAUC,IAAI,YAE9CJ,KAGRzB,KAAKyB,QAAQgB,UAAUzC,KAAK6C,eChBvB,MAAMI,UAA0BnB,EACtC/B,YAAYmD,GACXnB,MAAMmB,EAAM,CAAC,MAAO,cAAe,OAAQ,WCHtC,MAAMC,UAAiB7B,EAC7BvB,aAFDW,GAEeA,EAFf0C,KAEmBA,EAFnBC,KAEyBA,IACvBtB,MAAM,KAAM,CAAC,kBAAmB,SAAU,0BAA2B,uBAErE/B,KAAKsD,aAAe,IAAIhC,EAAa,MAAO,CAAC,YAAa,eAAgB,UAAUG,QACpFzB,KAAKuD,WAAa,IAAIzB,EAAO,SAAA,CAAiB,MAAO,gBAAgBL,QAC/DzB,KAADwD,aAAe,IAAI1B,EAAO,UAAA,CAAY,MAAO,eAAeL,QAEjEzB,KAAKyB,QAAQO,YAAcoB,EAC3BpD,KAAKyB,QAAQG,UAAU6B,OAAO,0BAA2BJ,GAEzDrD,KAAKyB,QAAQsB,QAAQrC,GAAKA,EAC1BV,KAAKuD,WAAWR,QAAQK,KAAO,OAC/BpD,KAAKwD,aAAaT,QAAQK,KAAO,SAEjCpD,KAAKsD,aAAab,OAAOzC,KAAKuD,WAAYvD,KAAKwD,cAC/CxD,KAAKyB,QAAQgB,OAAOzC,KAAKsD,eCfpB,MAAMI,UAAiBpC,EAC7BvB,cACCgC,MAAM,KAAM,CAAC,gBCAf,MAAM4B,EAAOjC,SAASkC,eAAe,YAE/BC,EAAO,ICFE,MACd9D,YAAY+D,GACX9D,KAAK8D,YAAcA,EAGpBC,WAAa,CAACC,EAAcC,KAC3B,MAAMC,EAAsBhF,EAAuB+E,GAC7CE,EAAY7E,EAAM8E,MAAK,EAX/B5E,MAWkCA,KAAYA,IAAUwE,IAAczE,MAEpES,KAAKqE,WAAa,IAAI3B,EAAWpD,EAAO0E,GACxChE,KAAKT,MAAQ,IAAI0C,EAAMkC,GACvBnE,KAAKsE,KAAO,IAAIpC,EAChBlC,KAAKuE,SAAW,IAAIb,EACpB1D,KAAKwE,kBAAoB,IAAIvB,EAAkBiB,GAC/ClE,KAAKyE,WAAa,IAAIxC,EAAM5C,EAAoB4E,GAAc,CAAC,OAAQ,SAEvEjE,KAAK8D,YAAY9B,YAAc,GAC/BhC,KAAK8D,YAAYrB,OAChBzC,KAAKqE,WAAW5C,QAChBzB,KAAKT,MAAMkC,QACXzB,KAAKsE,KAAK7C,QACVzB,KAAKyE,WAAWhD,QAChBzB,KAAKwE,kBAAkB/C,QACvBzB,KAAKuE,SAAS9C,SAGfzB,KAAKsE,KAAK7C,QAAQiD,iBAAiB,QAAS1E,KAAK2E,cAGlDC,YAAeC,IACd7E,KAAKuE,SAAS9C,QAAQO,YAAc,GAEpC,MAAM8C,EAAeD,EAAM7D,KAAKT,GAAS,IAAI4C,EAAS5C,GAAMkB,UAE5DzB,KAAKuE,SAAS9C,QAAQgB,UAAUqC,IAGjCC,cAAcC,GACbhF,KAAKsE,KAAK7C,QAAQiD,iBAAiB,UAAWO,IAC7CA,EAAMC,iBAEN,MAAM/C,EAAQnC,KAAKsE,KAAKnC,MAAMV,QACxBY,EAASrC,KAAKsE,KAAKjC,OAAOZ,QAC1B0D,EAAYhD,EAAMxC,MAAMyF,OAE9BjD,EAAMxC,MAAQ,GACd0C,EAAOG,UAAW,EAElBwC,EAAQG,MAIVE,iBAAiBC,EAAUC,GAC1BvF,KAAKuE,SAAS9C,QAAQiD,iBAAiB,SAAUO,IAChD,MAAMO,EAASP,EAAMQ,QAAQC,QAAQ,OAAO3C,SAASrC,GAC/CiF,EAAaV,EAAMQ,QAAQC,QAAQ,WAAW3C,SAASK,KAExDoC,GAAWG,IAED,SAAfA,EAAwBL,EAASE,GAAUD,EAAWC,OAIxDI,kBAAkBC,GACjB7F,KAAKwE,kBAAkB/C,QAAQiD,iBAAiB,QAASmB,GAG1DC,iBAAiBC,GAChB/F,KAAKqE,WAAW5C,QAAQiD,iBAAiB,SAAUO,IAClDA,EAAMC,iBACN,MAAMc,EAAYf,EAAMQ,QAAQC,QAAQ,KAClCO,EAASD,GAAWjD,SAASrC,GAE9BsF,GAAcC,IAEnBF,EAAiBE,GAEjBC,OAAOC,QAAQC,UAAU,CAAEC,KAAMJ,GAAUA,EAAQD,EAAUhD,UAI/DsD,eAAeP,GACdG,OAAOxB,iBAAiB,YAAaO,IACpC,MAAMoB,EAAOpB,EAAMsB,OAAOF,KAG1B,IAAKA,EAAM,OAAON,EAAiBzG,EAAM,GAAGE,OAE5CuG,EAAiBM,MAInB1B,YAAc,KACb,MAAMxC,EAAQnC,KAAKsE,KAAKnC,MAAMV,QACfzB,KAAKsE,KAAKjC,OAAOZ,QAEzBe,UAAYL,EAAMxC,MAAMyF,SD9FXzB,GAChB6C,EAAQ,IEJC,MACdC,GAAsB,OAEtBC,GAAYtD,GACX,MAAO,CAPTA,KAQGA,EACAC,MAAM,EACN7D,MAAOQ,KAAKgE,cAIdjE,YAAY4G,GACX3G,KAAKgE,aAAekC,OAAOU,UAAUC,UAAUC,MAAM,MAAMC,OAASzH,EAAM,GAAGE,MAC7EQ,KAAKiE,YAAchF,EAAS,GAC5Be,KAAK6E,MAAQ8B,GAAiB,gBAAkB3G,KAAKgH,WAAvB,GAG/BC,gBAAgBC,GACflH,MAAKyG,EAAsBS,EAG5BjH,iBACC,MAAMkH,EAAQ,IAAI1H,EAAMO,KAAKiE,aAAajE,KAAKgE,cAE/ChE,KAAK6E,YAAcsC,EAAM3G,WAEzBR,MAAKyG,EAAoBzG,KAAK6E,OAG/B5E,cAAcmH,GACb,MAAMD,EAAQ,IAAI1H,EAAMO,KAAKiE,aAAajE,KAAKgE,cACzCzD,EAAOP,MAAK0G,EAAYU,GAExBC,QAAoBF,EAAMG,WAAW/G,GAE3CP,KAAK6E,MAAQ,CAACwC,KAAgBrH,KAAK6E,OAEnC7E,MAAKyG,EAAoBzG,KAAK6E,OAG/B5E,eAAeiB,GACd,MAAMiG,EAAQ,IAAI1H,EAAMO,KAAKiE,aAAajE,KAAKgE,cACzCzD,EAAOP,KAAK6E,MAAMT,MAAK,EA7C/B1D,GA6CkCA,KAASA,IAAOQ,IAE1CqG,QAAoBJ,EAAMK,WAAW,IAAKjH,EAAM8C,MAAO9C,EAAK8C,OAElErD,KAAK6E,MAAQ7E,KAAK6E,MAAM7D,KAAKC,GAAUA,EAAKP,KAAOQ,EAASqG,EAActG,IAE1EjB,MAAKyG,EAAoBzG,KAAK6E,OAG/B5E,iBAAiBiB,GAChB,MAAMiG,EAAQ,IAAI1H,EAAMO,KAAKiE,aAAajE,KAAKgE,oBAEzCmD,EAAMM,WAAWvG,GAEvBlB,KAAK6E,MAAQ7E,KAAK6E,MAAMzD,QAAQH,GAASA,EAAKP,KAAOQ,IAErDlB,MAAKyG,EAAoBzG,KAAK6E,OAG/B5E,0BACC,MAAMyH,EAAoBzI,EAAS0I,QAAQ3H,KAAKiE,aAC1C2D,EAAmBF,IAAsBzI,EAAS4I,OAAS,EAGhE7H,KAAKiE,YADF2D,EACgB3I,EAAS,GAETA,EAASyI,EAAoB,SAG3C1H,KAAKgH,WAGZ/G,wBAAwBgG,GACvBjG,KAAKgE,aAAeiC,EACpBjG,KAAKiE,YAAchF,EAAS,SACtBe,KAAKgH,aFvEb,IGTe,MACdjH,YAAY+H,EAAMC,GACjB/H,KAAK8H,KAAOA,EACZ9H,KAAK+H,MAAQA,EAEb/H,KAAK+H,MAAMd,gBAAgBjH,KAAK8H,KAAKlD,aAErC5E,KAAKgI,aACLhI,KAAK8H,KAAKxB,eAAetG,KAAKiI,YAG/BD,WAAa,KACZhI,KAAK8H,KAAK/D,WAAW/D,KAAK+H,MAAM/D,aAAchE,KAAK+H,MAAM9D,aAEzDjE,KAAK8H,KAAK/C,cAAc/E,KAAKgF,SAC7BhF,KAAK8H,KAAKzC,iBAAiBrF,KAAKsF,SAAUtF,KAAKuF,YAC/CvF,KAAK8H,KAAKlC,kBAAkB5F,KAAK6F,aACjC7F,KAAK8H,KAAKhC,iBAAiB9F,KAAKiI,aAGjCjD,QAAWoC,IACVpH,KAAK+H,MAAM/C,QAAQoC,IAGpB9B,SAAYpE,IACXlB,KAAK+H,MAAMzC,SAASpE,IAGrBqE,WAAcrE,IACblB,KAAK+H,MAAMxC,WAAWrE,IAGvB2E,YAAc,KACb7F,KAAK+H,MAAMG,oBACXlI,KAAKgI,cAGNC,WAAchC,IACbjG,KAAK+H,MAAMI,kBAAkBlC,GAC7BjG,KAAKgI,eH9BQnE,EAAM2C","sources":["src/shared/constants.js","src/shared/storages/index.js","src/shared/storages/LocalStorage.js","src/shared/storages/SessionStorage.js","src/shared/ui/BasicElement.js","src/shared/ui/Button.js","src/shared/ui/Title.js","src/components/AddTodoForm.js","src/components/Navigation.js","src/components/SwitchStoreButton.js","src/components/TodoItem.js","src/components/TodoList.js","index.js","src/core/View.js","src/core/Model.js","src/core/Controller.js"],"sourcesContent":["export const LOCAL_STORAGE = 'LOCAL_STORAGE';\nexport const SESSION_STORAGE = 'SESSION_STORAGE';\n\nexport const STORAGES = [LOCAL_STORAGE, SESSION_STORAGE];\n\nexport const BTN_SWITCH_STORE_TITLE = {\n\t[LOCAL_STORAGE]: 'Переключить на сессионное хранилище',\n\t[SESSION_STORAGE]: 'Переключить на локальное хранилище',\n};\n\nexport const CURRENT_STORE_TITLE = {\n\t[LOCAL_STORAGE]: 'Текущее хранилище - Local Storage',\n\t[SESSION_STORAGE]: 'Текущее хранилище - Session Storage',\n};\n\nexport const PAGES = [\n\t{ title: 'Мои дела', owner: 'my' },\n\t{ title: 'Дела папы', owner: 'dad' },\n\t{ title: 'Дела мамы', owner: 'mom' },\n];\n","import { LOCAL_STORAGE, SESSION_STORAGE } from '../constants';\nimport { LocalStorage } from './LocalStorage';\nimport { SessionStorage } from './SessionStorage';\n\nexport const Store = {\n\t[LOCAL_STORAGE]: LocalStorage,\n\t[SESSION_STORAGE]: SessionStorage,\n};\n","export class LocalStorage {\n\t#parse(value) {\n\t\treturn JSON.parse(value);\n\t}\n\t#stringify(value) {\n\t\treturn JSON.stringify(value);\n\t}\n\n\tconstructor(owner) {\n\t\tthis.owner = owner;\n\t}\n\n\tasync getItems() {\n\t\tconst items = this.#parse(localStorage.getItem(this.owner)) || [];\n\n\t\treturn Promise.resolve(items);\n\t}\n\n\tasync createItem(todo) {\n\t\tconst items = await this.getItems(this.owner);\n\t\tconst newItem = { ...todo, id: Date.now().toString(16) };\n\n\t\tlocalStorage.setItem(this.owner, this.#stringify([newItem, ...items]));\n\n\t\treturn Promise.resolve(newItem);\n\t}\n\n\tasync updateItem(todo) {\n\t\tconst items = await this.getItems(this.owner);\n\t\tconst updatedItems = items.map((item) => (item.id === todo.id ? todo : item));\n\n\t\tlocalStorage.setItem(this.owner, this.#stringify(updatedItems));\n\n\t\treturn Promise.resolve(todo);\n\t}\n\n\tasync deleteItem(todoId) {\n\t\tconst items = await this.getItems(this.owner);\n\t\tconst newItems = items.filter(({ id }) => id !== todoId);\n\n\t\tlocalStorage.setItem(this.owner, this.#stringify(newItems));\n\n\t\treturn Promise.resolve(todoId);\n\t}\n}\n","export class SessionStorage {\n\t#parse(value) {\n\t\treturn JSON.parse(value);\n\t}\n\t#stringify(value) {\n\t\treturn JSON.stringify(value);\n\t}\n\n\tconstructor(owner) {\n\t\tthis.owner = owner;\n\t}\n\n\tasync getItems() {\n\t\tconst items = this.#parse(sessionStorage.getItem(this.owner)) || [];\n\n\t\treturn Promise.resolve(items);\n\t}\n\n\tasync createItem(todo) {\n\t\tconst items = await this.getItems(this.owner);\n\t\tconst newItem = { ...todo, id: Date.now().toString(16) };\n\n\t\tsessionStorage.setItem(this.owner, this.#stringify([newItem, ...items]));\n\n\t\treturn Promise.resolve(newItem);\n\t}\n\n\tasync updateItem(todo) {\n\t\tconst items = await this.getItems(this.owner);\n\t\tconst updatedItems = items.map((item) => (item.id === todo.id ? todo : item));\n\n\t\tsessionStorage.setItem(this.owner, this.#stringify(updatedItems));\n\n\t\treturn Promise.resolve(todo);\n\t}\n\n\tasync deleteItem(todoId) {\n\t\tconst items = await this.getItems(this.owner);\n\t\tconst newItems = items.filter(({ id }) => id !== todoId);\n\n\t\tsessionStorage.setItem(this.owner, this.#stringify(newItems));\n\n\t\treturn Promise.resolve(todoId);\n\t}\n}\n","export class BasicElement {\n\tconstructor(tag, classes = []) {\n\t\tthis.element = document.createElement(tag);\n\t\tthis.element.classList.add(...classes);\n\t}\n}\n","import { BasicElement } from './BasicElement';\n\nexport class Button extends BasicElement {\n\tconstructor(title, classes) {\n\t\tsuper('button', classes);\n\n\t\tthis.element.textContent = title;\n\t}\n}\n","import { BasicElement } from './BasicElement';\n\nexport class Title extends BasicElement {\n\tconstructor(title, classes) {\n\t\tsuper('h2', classes);\n\t\tthis.element.textContent = title;\n\t}\n}\n","import { BasicElement, Button } from '../shared/ui';\n\nexport class AddTodoForm extends BasicElement {\n\tconstructor() {\n\t\tsuper('form', ['input-group', 'mb-3', 'gap-3']);\n\n\t\tthis.input = new BasicElement('input', ['form-control']);\n\t\tthis.buttonWrapper = new BasicElement('div', ['input-group-append']);\n\t\tthis.button = new Button('Добавить дело', ['btn', 'btn-primary']);\n\n\t\tthis.input.element.placeholder = 'Введите название нового дела';\n\t\tthis.input.element.setAttribute('autofocus', '');\n\t\tthis.button.element.disabled = true;\n\n\t\tthis.buttonWrapper.element.append(this.button.element);\n\t\tthis.element.append(this.input.element, this.buttonWrapper.element);\n\t}\n}\n","import { BasicElement } from '../shared/ui';\n\nexport class Navigation extends BasicElement {\n\tconstructor(navList, activeItemValue) {\n\t\tsuper('nav', ['nav', 'mb-5', 'justify-content-center']);\n\n\t\tthis.itemElements = navList.map(({ title, owner }, index) => {\n\t\t\tconst { element } = new BasicElement('a', ['nav-link', 'm-1']);\n\n\t\t\telement.dataset.id = owner;\n\t\t\telement.textContent = title;\n\t\t\telement.href = index === 0 ? '/' : owner;\n\n\t\t\tif (activeItemValue === owner) element.classList.add('disabled');\n\n\t\t\treturn element;\n\t\t});\n\n\t\tthis.element.append(...this.itemElements);\n\t}\n}\n","import { Button } from '../shared/ui';\n\nexport class SwitchStoreButton extends Button {\n\tconstructor(text) {\n\t\tsuper(text, ['btn', 'btn-warning', 'mb-3', 'w-100']);\n\t}\n}\n","import { BasicElement, Button } from '../shared/ui';\nexport class TodoItem extends BasicElement {\n\tconstructor({ id, name, done }) {\n\t\tsuper('li', ['list-group-item', 'd-flex', 'justify-content-between', 'align-items-center']);\n\n\t\tthis.buttonsWrapp = new BasicElement('div', ['btn-group', 'btn-group-sm', 'gap-2']).element;\n\t\tthis.doneButton = new Button('Готово', ['btn', 'btn-success']).element;\n\t\tthis.deleteButton = new Button('Удалить', ['btn', 'btn-danger']).element;\n\n\t\tthis.element.textContent = name;\n\t\tthis.element.classList.toggle('list-group-item-success', done);\n\n\t\tthis.element.dataset.id = id;\n\t\tthis.doneButton.dataset.name = 'done';\n\t\tthis.deleteButton.dataset.name = 'delete';\n\n\t\tthis.buttonsWrapp.append(this.doneButton, this.deleteButton);\n\t\tthis.element.append(this.buttonsWrapp);\n\t}\n}\n","import { BasicElement } from '../shared/ui';\n\nexport class TodoList extends BasicElement {\n\tconstructor() {\n\t\tsuper('ul', ['list-group']);\n\t}\n}\n","import Model from './src/core/Model';\nimport View from './src/core/View';\nimport Controller from './src/core/Controller';\n\nconst root = document.getElementById('todo-app');\n\nconst view = new View(root);\nconst model = new Model();\n\nnew Controller(view, model);\n","import { PAGES, BTN_SWITCH_STORE_TITLE, CURRENT_STORE_TITLE } from '../shared/constants';\nimport { Title } from '../shared/ui/';\nimport { Navigation, AddTodoForm, TodoList, TodoItem, SwitchStoreButton } from '../components/';\n\nexport default class View {\n\tconstructor(rootElement) {\n\t\tthis.rootElement = rootElement;\n\t}\n\n\tcreatePage = (currentOwner, activeStore) => {\n\t\tconst btnSwitchStoreTitle = BTN_SWITCH_STORE_TITLE[activeStore];\n\t\tconst pageTitle = PAGES.find(({ owner }) => owner === currentOwner).title;\n\n\t\tthis.navigation = new Navigation(PAGES, currentOwner);\n\t\tthis.title = new Title(pageTitle);\n\t\tthis.form = new AddTodoForm();\n\t\tthis.todoList = new TodoList();\n\t\tthis.switchStoreButton = new SwitchStoreButton(btnSwitchStoreTitle);\n\t\tthis.storeTitle = new Title(CURRENT_STORE_TITLE[activeStore], ['fs-6', 'my-3']);\n\n\t\tthis.rootElement.textContent = '';\n\t\tthis.rootElement.append(\n\t\t\tthis.navigation.element,\n\t\t\tthis.title.element,\n\t\t\tthis.form.element,\n\t\t\tthis.storeTitle.element,\n\t\t\tthis.switchStoreButton.element,\n\t\t\tthis.todoList.element\n\t\t);\n\n\t\tthis.form.element.addEventListener('input', this.handleInput);\n\t};\n\n\tcreateTodos = (todos) => {\n\t\tthis.todoList.element.textContent = '';\n\n\t\tconst todoElements = todos.map((todo) => new TodoItem(todo).element);\n\n\t\tthis.todoList.element.append(...todoElements);\n\t};\n\n\thandleAddTodo(addTodo) {\n\t\tthis.form.element.addEventListener('submit', (event) => {\n\t\t\tevent.preventDefault();\n\n\t\t\tconst input = this.form.input.element;\n\t\t\tconst button = this.form.button.element;\n\t\t\tconst todoTitle = input.value.trim();\n\n\t\t\tinput.value = '';\n\t\t\tbutton.disabled = true;\n\n\t\t\taddTodo(todoTitle);\n\t\t});\n\t}\n\n\thandleChangeTodo(doneTodo, deleteTodo) {\n\t\tthis.todoList.element.addEventListener('click', (event) => {\n\t\t\tconst itemId = event.target?.closest('li')?.dataset?.id;\n\t\t\tconst buttonName = event.target?.closest('button')?.dataset?.name;\n\n\t\t\tif (!itemId || !buttonName) return;\n\n\t\t\tbuttonName === 'done' ? doneTodo(itemId) : deleteTodo(itemId);\n\t\t});\n\t}\n\n\thandleChangeStore(changeStore) {\n\t\tthis.switchStoreButton.element.addEventListener('click', changeStore);\n\t}\n\n\thandleChangePage(changeActivePage) {\n\t\tthis.navigation.element.addEventListener('click', (event) => {\n\t\t\tevent.preventDefault();\n\t\t\tconst navButton = event.target?.closest('a');\n\t\t\tconst pageId = navButton?.dataset?.id;\n\n\t\t\tif (!navButton || !pageId) return;\n\n\t\t\tchangeActivePage(pageId);\n\n\t\t\twindow.history.pushState({ page: pageId }, pageId, navButton.href);\n\t\t});\n\t}\n\n\thandlePopState(changeActivePage) {\n\t\twindow.addEventListener('popstate', (event) => {\n\t\t\tconst page = event.state?.page;\n\n\t\t\t// redirect to '/'\n\t\t\tif (!page) return changeActivePage(PAGES[0].owner);\n\n\t\t\tchangeActivePage(page);\n\t\t});\n\t}\n\n\thandleInput = () => {\n\t\tconst input = this.form.input.element;\n\t\tconst button = this.form.button.element;\n\n\t\tbutton.disabled = !input.value.trim();\n\t};\n}\n","import { PAGES, STORAGES } from '../shared/constants';\nimport { Store } from '../shared/storages';\n\nexport default class Model {\n\t#setTodoStateUpdate = () => {};\n\n\t#createTodo(name) {\n\t\treturn {\n\t\t\tname,\n\t\t\tdone: false,\n\t\t\towner: this.currentOwner,\n\t\t};\n\t}\n\n\tconstructor(initialTodos) {\n\t\tthis.currentOwner = window.location?.pathname?.split('/')?.pop() || PAGES[0].owner;\n\t\tthis.activeStore = STORAGES[0];\n\t\tthis.todos = initialTodos || (async () => await this.getTodos())();\n\t}\n\n\ttodoStateUpdate(callback) {\n\t\tthis.#setTodoStateUpdate = callback;\n\t}\n\n\tasync getTodos() {\n\t\tconst store = new Store[this.activeStore](this.currentOwner);\n\n\t\tthis.todos = await store.getItems();\n\n\t\tthis.#setTodoStateUpdate(this.todos);\n\t}\n\n\tasync addTodo(todoName) {\n\t\tconst store = new Store[this.activeStore](this.currentOwner);\n\t\tconst todo = this.#createTodo(todoName);\n\n\t\tconst createdTodo = await store.createItem(todo);\n\n\t\tthis.todos = [createdTodo, ...this.todos];\n\n\t\tthis.#setTodoStateUpdate(this.todos);\n\t}\n\n\tasync doneTodo(todoId) {\n\t\tconst store = new Store[this.activeStore](this.currentOwner);\n\t\tconst todo = this.todos.find(({ id }) => id === todoId);\n\n\t\tconst updatedTodo = await store.updateItem({ ...todo, done: !todo.done });\n\n\t\tthis.todos = this.todos.map((item) => (item.id === todoId ? updatedTodo : item));\n\n\t\tthis.#setTodoStateUpdate(this.todos);\n\t}\n\n\tasync deleteTodo(todoId) {\n\t\tconst store = new Store[this.activeStore](this.currentOwner);\n\n\t\tawait store.deleteItem(todoId);\n\n\t\tthis.todos = this.todos.filter((item) => item.id !== todoId);\n\n\t\tthis.#setTodoStateUpdate(this.todos);\n\t}\n\n\tasync changeActiveStore() {\n\t\tconst currentStoreIndex = STORAGES.indexOf(this.activeStore);\n\t\tconst isLastStoreIndex = currentStoreIndex === STORAGES.length - 1;\n\n\t\tif (isLastStoreIndex) {\n\t\t\tthis.activeStore = STORAGES[0];\n\t\t} else {\n\t\t\tthis.activeStore = STORAGES[currentStoreIndex + 1];\n\t\t}\n\n\t\tawait this.getTodos();\n\t}\n\n\tasync changeCurrentPage(pageId) {\n\t\tthis.currentOwner = pageId;\n\t\tthis.activeStore = STORAGES[0];\n\t\tawait this.getTodos();\n\t}\n}\n","export default class Controller {\n\tconstructor(view, model) {\n\t\tthis.view = view;\n\t\tthis.model = model;\n\n\t\tthis.model.todoStateUpdate(this.view.createTodos);\n\n\t\tthis.renderPage();\n\t\tthis.view.handlePopState(this.changePage);\n\t}\n\n\trenderPage = () => {\n\t\tthis.view.createPage(this.model.currentOwner, this.model.activeStore);\n\n\t\tthis.view.handleAddTodo(this.addTodo);\n\t\tthis.view.handleChangeTodo(this.doneTodo, this.deleteTodo);\n\t\tthis.view.handleChangeStore(this.changeStore);\n\t\tthis.view.handleChangePage(this.changePage);\n\t};\n\n\taddTodo = (todoName) => {\n\t\tthis.model.addTodo(todoName);\n\t};\n\n\tdoneTodo = (todoId) => {\n\t\tthis.model.doneTodo(todoId);\n\t};\n\n\tdeleteTodo = (todoId) => {\n\t\tthis.model.deleteTodo(todoId);\n\t};\n\n\tchangeStore = () => {\n\t\tthis.model.changeActiveStore();\n\t\tthis.renderPage();\n\t};\n\n\tchangePage = (pageId) => {\n\t\tthis.model.changeCurrentPage(pageId);\n\t\tthis.renderPage();\n\t};\n}\n"],"names":["$2bd9d04ce55ef2a0$export$e568de7d94534647","$2bd9d04ce55ef2a0$export$4a887b507d29fddd","LOCAL_STORAGE","SESSION_STORAGE","$2bd9d04ce55ef2a0$export$b9d80335f2a06de1","$2bd9d04ce55ef2a0$export$bf0267afb2fbc151","title","owner","$f92e2fe0df083356$export$390f32400eaf98c9","parse","value","JSON","stringify","value1","constructor","this","async","items","localStorage","getItem","Promise","resolve","todo","getItems","newItem","id","Date","now","toString","setItem","updatedItems","map","item","todoId","newItems","filter","sessionStorage","$b2617bb0e81eaa5f$export$603feea8590d37ff","tag","classes","element","document","createElement","classList","add","$53f2315e014c68df$export$353f5b6fc5456de1","super","textContent","$7ade43a66b5b3654$export$f99233281efd08a0","$311fccc935fc74b0$export$5815d58f4094bafe","input","buttonWrapper","button","placeholder","setAttribute","disabled","append","$5437dddba42655e6$export$b8a61e5c71402559","navList","activeItemValue","itemElements","index","dataset","href","$4d8bfd950d530c87$export$eb7c63467ca464c1","text","$321f2d602f53b546$export$de515f7f7fedd6e3","name","done","buttonsWrapp","doneButton","deleteButton","toggle","$6a72d2dc802d6209$export$1637e515a5a47691","$dad545c909cfec2d$var$root","getElementById","$dad545c909cfec2d$var$view","rootElement","createPage","currentOwner","activeStore","btnSwitchStoreTitle","pageTitle","find","navigation","form","todoList","switchStoreButton","storeTitle","addEventListener","handleInput","createTodos","todos","todoElements","handleAddTodo","addTodo","event","preventDefault","todoTitle","trim","handleChangeTodo","doneTodo","deleteTodo","itemId","target","closest","buttonName","handleChangeStore","changeStore","handleChangePage","changeActivePage","navButton","pageId","window","history","pushState","page","handlePopState","state","$dad545c909cfec2d$var$model","setTodoStateUpdate","createTodo","initialTodos","location","pathname","split","pop","getTodos","todoStateUpdate","callback","store","todoName","createdTodo","createItem","updatedTodo","updateItem","deleteItem","currentStoreIndex","indexOf","isLastStoreIndex","length","view","model","renderPage","changePage","changeActiveStore","changeCurrentPage"],"version":3,"file":"index.bd1bc9ca.js.map"}